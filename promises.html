<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // problem:1
        /*
        let loadScript =async (src) => {
            return new Promise((resolve, reject) => {
                let script = document.createElement("script");
                script.src = src;
                document.head.append(script);
                script.onload =()=>{
                    resolve(src);
                }
            })
        }
        let func2 = async ()=>{
            let a = await loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js")
            console.log(a);
        }
        func2();
        */

        // problem: 2
        // creat a promise which gets rejected aftar 3 secends and use try and cacth method to handle the error

        /*
        let p = () => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    reject(new Error("sorry error accured"))
                }, 3000);
            })
        }
        let a = async () => {

            try{
                let c = await p();
                console.log(c);
            }
            catch(err){
                console.log("This error has been handled");
            }
        }
        a();
        */


        // problem :3
        // write a programe using promis.all(), inside the asinc/await to await 3 promises.compare its results with the case where we await the peomises one by one

         let p1 = async()=>{
            return new Promise((resolve,reject)=>{
                setTimeout(() => {
                    resolve(50)
                }, 1000);
            })

         }

         let p2 = async()=>{
            return new Promise((resolve,reject)=>{
                setTimeout(() => {
                    resolve(60)
                }, 2000);
            })

         }

         let p3 = async()=>{
            return new Promise((resolve,reject)=>{
                setTimeout(() => {
                    resolve(70)
                }, 3000);
            })

         }

        //  const run =async()=>{
        //     console.time()
        //     let a1 =await p1()
        //     let a2 =await p2()
        //     let a3 =await p3()
        //      console.log(a1,a2,a3);
        //      console.timeEnd()
        //  }
        //  run();

        // NOTE :: Rather doing this we can use promise.all(). so that it will take less time to run

        const run =async()=>{
            console.time()
            let a1 = p1()
            let a2 = p2()
            let a3 = p3()
            let a1a2a3 =await Promise.all([a1,a2,a3])
            console.log(a1a2a3
            );
            console.timeEnd()
        }
        run()


    </script>
</body>

</html>